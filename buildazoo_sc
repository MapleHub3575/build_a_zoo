-- à¹‚à¸«à¸¥à¸” Rayfield UI
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local LocalPlayer = Players.LocalPlayer

-- Config à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™
local Config = {
Â  Â  AutoFarm = true,
Â  Â  FarmDelay = 15, -- à¸§à¸´à¸™à¸²à¸—à¸µ
Â  Â  AutoRejoin = true,
Â  Â  RejoinDelay = 5 -- à¸§à¸´à¸™à¸²à¸—à¸µ
}

-- à¸ªà¸£à¹‰à¸²à¸‡à¸«à¸™à¹‰à¸²à¸•à¹ˆà¸²à¸‡ Rayfield
local Window = Rayfield:CreateWindow({
Â  Â  Name = "Maple Hub",
Â  Â  LoadingTitle = "Maple Hub Loading...",
Â  Â  LoadingSubtitle = "by Maple_D",
Â  Â  ConfigurationSaving = {
Â  Â  Â  Â  Enabled = true,
Â  Â  Â  Â  FolderName = "MapleHub",
Â  Â  Â  Â  FileName = "MapleConfig"
Â  Â  },
Â  Â  Discord = { Enabled = false }
})

-- ğŸŒ¾ Farm Tab
local FarmTab = Window:CreateTab("ğŸŒ¾ Farm", 4483362458)
local AutoFarmSection = FarmTab:CreateSection("Auto Farm Settings")

-- Toggle Auto Farm
FarmTab:CreateToggle({
Â  Â  Name = "Auto Farm",
Â  Â  CurrentValue = false,
Â  Â  Flag = "AutoFarm",
Â  Â  Callback = function(Value)
Â  Â  Â  Â  Config.AutoFarm = Value
Â  Â  Â  Â  print("Auto Farm " .. (Value and "On" or "Off"))
Â  Â  end,
})

-- Slider Delay Farm
FarmTab:CreateSlider({
Â  Â  Name = "Delay Farm",
Â  Â  Range = {0.1, 100},
Â  Â  Increment = 1,
Â  Â  Suffix = "s",
Â  Â  CurrentValue = Config.FarmDelay,
Â  Â  Flag = "FarmDelay",
Â  Â  Callback = function(Value)
Â  Â  Â  Â  Config.FarmDelay = Value
Â  Â  Â  Â  print("Delay Farm = " .. Value .. "s")
Â  Â  end,
})

-- âš™ Main Tab
local MainTab = Window:CreateTab("âš™ Main", 4483362458)
local AutoRejoinSection = MainTab:CreateSection("Auto Rejoin Settings")

-- Toggle Auto Rejoin
MainTab:CreateToggle({
Â  Â  Name = "Auto Rejoin",
Â  Â  CurrentValue = false,
Â  Â  Flag = "AutoRejoin",
Â  Â  Callback = function(Value)
Â  Â  Â  Â  Config.AutoRejoin = Value
Â  Â  Â  Â  print("Auto Rejoin " .. (Value and "On" or "Off"))
Â  Â  end,
})

-- Slider Rejoin Delay
MainTab:CreateSlider({
Â  Â  Name = "Rejoin Delay",
Â  Â  Range = {1, 30},
Â  Â  Increment = 1,
Â  Â  Suffix = "s",
Â  Â  CurrentValue = Config.RejoinDelay,
Â  Â  Flag = "RejoinDelay",
Â  Â  Callback = function(Value)
Â  Â  Â  Â  Config.RejoinDelay = Value
Â  Â  Â  Â  print("Rejoin Delay = " .. Value .. "s")
Â  Â  end,
})

-- à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸£à¸­à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œ Pets
local function WaitForPetsFolder()
Â  Â  return workspace:WaitForChild("Pets")
end

-- Auto Farm Logic (à¹€à¸à¹‡à¸š Pets)
task.spawn(function()
Â  Â  local petsFolder = WaitForPetsFolder()
Â  Â  while true do
Â  Â  Â  Â  if Config.AutoFarm then
Â  Â  Â  Â  Â  Â  for _, pet in pairs(petsFolder:GetChildren()) do
Â  Â  Â  Â  Â  Â  Â  Â  local root = pet:FindFirstChild("RootPart")
Â  Â  Â  Â  Â  Â  Â  Â  if root then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  local remote = root:FindFirstChild("RE")
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if remote and remote:IsA("RemoteEvent") then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pcall(function()
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  remote:FireServer("Claim")
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  end)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  task.wait(Config.FarmDelay)
Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  task.wait(1)
Â  Â  Â  Â  end
Â  Â  end
end)

-- à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸£à¸­ PromptGui
local function WaitForPromptGui()
Â  Â  return game:GetService("CoreGui"):WaitForChild("PromptGui")
end

-- Auto Rejoin Logic
task.spawn(function()
Â  Â  local promptGui = WaitForPromptGui()
Â  Â  promptGui.promptOverlay.ChildAdded:Connect(function(obj)
Â  Â  Â  Â  if obj.Name == "ErrorPrompt" and Config.AutoRejoin then
Â  Â  Â  Â  Â  Â  task.spawn(function()
Â  Â  Â  Â  Â  Â  Â  Â  task.wait(Config.RejoinDelay)
Â  Â  Â  Â  Â  Â  Â  Â  pcall(function()
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  TeleportService:TeleportToPlaceInstance(game.PlaceId, game.JobId, LocalPlayer)
Â  Â  Â  Â  Â  Â  Â  Â  end)
Â  Â  Â  Â  Â  Â  end)
Â  Â  Â  Â  end
Â  Â  end)
end)        end
    end

    -- à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¹€à¸‹à¸Ÿ Config à¸¥à¸‡ DataStore
    local function SaveConfig()
        local success, err = pcall(function()
            ConfigStore:SetAsync(LocalPlayer.UserId, Config)
        end)
        if success then
            print("Config Saved")
        else
            warn("Failed to save Config: "..err)
        end
    end

    -- à¹‚à¸«à¸¥à¸” Config à¸•à¸­à¸™à¹€à¸£à¸´à¹ˆà¸¡
    LoadConfig()

    -- à¸ªà¸£à¹‰à¸²à¸‡à¸«à¸™à¹‰à¸²à¸•à¹ˆà¸²à¸‡ Rayfield
    local Window = Rayfield:CreateWindow({
        Name = "Maple Hub",
        LoadingTitle = "Maple Hub Loading...",
        LoadingSubtitle = "by Maple_D",
        ConfigurationSaving = { Enabled = false }, -- à¸›à¸´à¸”à¸à¸²à¸£à¹€à¸‹à¸Ÿà¹„à¸Ÿà¸¥à¹Œà¹€à¸à¸£à¸²à¸°à¹ƒà¸Šà¹‰ DataStore
        Discord = { Enabled = false }
    })

    -- ğŸŒ¾ Farm Tab
    local FarmTab = Window:CreateTab("ğŸŒ¾ Farm", 4483362458)
    FarmTab:CreateSection("Auto Farm Settings")

    -- Toggle Auto Farm
    FarmTab:CreateToggle({
        Name = "Auto Farm",
        CurrentValue = Config.AutoFarm,
        Flag = "AutoFarm",
        Callback = function(Value)
            Config.AutoFarm = Value
            SaveConfig()
            print("Auto Farm " .. (Value and "On" or "Off"))
        end,
    })

    -- Slider Delay Farm
    FarmTab:CreateSlider({
        Name = "Delay Farm",
        Range = {0.1, 100},
        Increment = 1,
        Suffix = "s",
        CurrentValue = Config.FarmDelay,
        Flag = "FarmDelay",
        Callback = function(Value)
            Config.FarmDelay = Value
            SaveConfig()
            print("Delay Farm = " .. Value .. "s")
        end,
    })

    -- âš™ Main Tab
    local MainTab = Window:CreateTab("âš™ Main", 4483362458)
    MainTab:CreateSection("Auto Rejoin Settings")

    -- Toggle Auto Rejoin
    MainTab:CreateToggle({
        Name = "Auto Rejoin",
        CurrentValue = Config.AutoRejoin,
        Flag = "AutoRejoin",
        Callback = function(Value)
            Config.AutoRejoin = Value
            SaveConfig()
            print("Auto Rejoin " .. (Value and "On" or "Off"))
        end,
    })

    -- Slider Rejoin Delay
    MainTab:CreateSlider({
        Name = "Rejoin Delay",
        Range = {1, 30},
        Increment = 1,
        Suffix = "s",
        CurrentValue = Config.RejoinDelay,
        Flag = "RejoinDelay",
        Callback = function(Value)
            Config.RejoinDelay = Value
            SaveConfig()
            print("Rejoin Delay = " .. Value .. "s")
        end,
    })

    -- à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸£à¸­à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œ Pets
    local function WaitForPetsFolder()
        return workspace:WaitForChild("Pets")
    end

    -- Auto Farm Logic
    task.spawn(function()
        local petsFolder = WaitForPetsFolder()
        while true do
            if Config.AutoFarm then
                for _, pet in pairs(petsFolder:GetChildren()) do
                    local root = pet:FindFirstChild("RootPart")
                    if root then
                        local remote = root:FindFirstChild("RE")
                        if remote and remote:IsA("RemoteEvent") then
                            pcall(function()
                                remote:FireServer("Claim")
                            end)
                        end
                    end
                end
                task.wait(Config.FarmDelay)
            else
                task.wait(1)
            end
        end
    end)

    -- à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸£à¸­ PromptGui
    local function WaitForPromptGui()
        return game:GetService("CoreGui"):WaitForChild("PromptGui")
    end

    -- Auto Rejoin Logic
    task.spawn(function()
        local promptGui = WaitForPromptGui()
        promptGui.promptOverlay.ChildAdded:Connect(function(obj)
            if obj.Name == "ErrorPrompt" and Config.AutoRejoin then
                task.spawn(function()
                    task.wait(Config.RejoinDelay)
                    pcall(function()
                        TeleportService:TeleportToPlaceInstance(game.PlaceId, game.JobId, LocalPlayer)
                    end)
                end)
            end
        end)
    end)
end)
